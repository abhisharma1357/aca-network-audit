<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/ACATokenSale.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> ACATokenSale.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">92.18% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>224/243</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">54.74% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>104/190</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">95.38% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>62/65</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">92.17% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>212/230</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">32×</span>
<span class="cline-any cline-yes">29×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23×</span>
<span class="cline-any cline-yes">20×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">20×</span>
<span class="cline-any cline-yes">18×</span>
<span class="cline-any cline-yes">18×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">12×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18×</span>
<span class="cline-any cline-yes">18×</span>
<span class="cline-any cline-yes">43×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">12×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">12×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">14×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">21×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">29×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">pragma solidity ^0.4.19;
&nbsp;
import "./SafeMath.sol";
import "./RefundVault.sol";
import "./ACAToken.sol";
&nbsp;
contract ACATokenSale {
    using SafeMath for uint256;
&nbsp;
    address public owner;
    address public admin;
&nbsp;
    address public wallet;
    ACAToken public token;
&nbsp;
    uint256 totalSupply;
&nbsp;
    struct StageInfo {
        uint256 opening;
        uint256 closing;
        uint256 capacity;
        uint256 minimumWei;
        uint256 maximumWei;
        uint256 rate;
        uint256 sold;
    }
    bool public tokenSaleEnabled = false;
&nbsp;
    mapping(address =&gt; bool) public whitelist;
    mapping(address =&gt; bool) public kyclist;
    mapping(address =&gt; bool) public whitelistBonus;
&nbsp;
    uint256 public whitelistBonusClosingTime;
    uint256 public whitelistBonusSent = 0;
    uint256 public whitelistBonusRate;
    uint256 public whitelistBonusAmount;
&nbsp;
    mapping (address =&gt; uint256) public sales;
    uint256 public softCap;
    uint256 public hardCap;
    uint256 public weiRaised = 0;
&nbsp;
    RefundVault public vault;
&nbsp;
    mapping (address =&gt; address) public referrals;
    uint256 public referralAmount;
    uint256 public referralRateInviter;
    uint256 public referralRateInvitee;
    uint256 public referralSent = 0;
    bool public referralDone = false;
&nbsp;
    mapping (address =&gt; uint256) public bounties;
    uint256 public bountyAmount;
    uint256 public bountySent = 0;
&nbsp;
    StageInfo[] public stages;
    uint256 public currentStage = 0;
&nbsp;
    bool public isFinalized = false;
    bool public isClaimable = false;
&nbsp;
    // events
    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);
    event AdminTransferred(address indexed previousAdmin, address indexed newAdmin);
    event TokenSaleCreated(address indexed wallet, uint256 totalSupply);
    event StageAdded(uint256 openingTime, uint256 closingTime, uint256 capacity, uint256 minimumWei, uint256 maximumWei, uint256 rate);
    event TokenSaleEnabled();
&nbsp;
    event WhitelistUpdated(address indexed beneficiary, bool flag);
    event VerificationUpdated(address indexed beneficiary, bool flag);
    event BulkWhitelistUpdated(address[] beneficiary, bool flag);
    event BulkVerificationUpdated(address[] beneficiary, bool flag);
&nbsp;
    event TokenPurchase(address indexed purchaser, address indexed beneficiary, uint256 value, uint256 amount);
    event TokenClaimed(address indexed beneficiary, uint256 amount);
    event Finalized();
    event BountySetupDone();
    event BountyUpdated(address indexed target, bool flag, uint256 amount);
    event PurchaseReferral(address indexed beneficiary, uint256 amount);
    event StageUpdated(uint256 stage);
    event StageCapReached(uint256 stage);
    event ReferralCapReached();
&nbsp;
    // do not use this on mainnet!
    event LogAddress(address indexed addr);
    event LogUint256(uint256 value);
&nbsp;
    // modifiers
    modifier onlyOwner() {
        require(msg.sender == owner);
        _;
    }
&nbsp;
    modifier onlyAdmin() {
        require(msg.sender == owner || msg.sender == admin);
        _;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    modifier onlyWhileOpe</span>n {
<span class="cstat-no" title="statement not covered" >        require(tokenSaleEnabled == true)</span>;
<span class="cstat-no" title="statement not covered" >        require(now &gt;= stages[currentStage].opening &amp;&amp; now &lt;= stages[currentStage].closing)</span>;
        _;
    }
&nbsp;
    modifier isVerified(address _beneficiary) {
        require(whitelist[_beneficiary] == true);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(kyclist[_beneficiary] == true);
        _;
    }
&nbsp;
    modifier claimable {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(isFinalized == true || isClaimable == true);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(isGoalReached());
        _;
    }
&nbsp;
    // getters
    function isEnabled() public view returns (bool) {
        return tokenSaleEnabled;
    }
&nbsp;
    function isClosed() public view returns (bool) {
        return now &gt; stages[stages.length - 1].closing;
    }
&nbsp;
    function isGoalReached() public view returns (bool) {
        return getTotalTokenSold() &gt;= softCap;
    }
&nbsp;
    function getTotalTokenSold() public view returns (uint256) {
        uint256 sold = 0;
        for ( uint i = 0; i &lt; stages.length; ++i ) {
            sold = sold.add(stages[i].sold);
        }
&nbsp;
        return sold;
    }
&nbsp;
    function getOpeningTime() public view returns (uint256) {
        return stages[currentStage].opening;
    }
&nbsp;
    function getOpeningTimeByStage(uint _index) public view returns (uint256) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_index &lt; stages.length);
        return stages[_index].opening;
    }
&nbsp;
    function getClosingTime() public view returns (uint256) {
        return stages[currentStage].closing;
    }
&nbsp;
    function getClosingTimeByStage(uint _index) public view returns (uint256) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_index &lt; stages.length);
        return stages[_index].closing;
    }
&nbsp;
    function getCurrentCapacity() public view returns (uint256) {
        return stages[currentStage].capacity;
    }
&nbsp;
    function getCapacity(uint _index) public view returns (uint256) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_index &lt; stages.length);
        return stages[_index].capacity;
    }
&nbsp;
    function getCurrentSold() public view returns (uint256) {
        return stages[currentStage].sold;
    }
&nbsp;
    function getSold(uint _index) public view returns (uint256) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_index &lt; stages.length);
        return stages[_index].sold;
    }
&nbsp;
    function getCurrentRate() public view returns (uint256) {
        return stages[currentStage].rate;
    }
&nbsp;
    function getRate(uint _index) public view returns (uint256) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_index &lt; stages.length);
        return stages[_index].rate;
    }
&nbsp;
    function getRateWithoutBonus() public view returns (uint256) {
        return stages[stages.length - 1].rate;
    }
&nbsp;
    function getSales(address _beneficiary) public view returns (uint256) {
        return sales[_beneficiary];
    }
    
    // setter
    function setSalePeriod(uint _index, uint256 _openingTime, uint256 _closingTime) onlyOwner public {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_openingTime &gt; now);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_closingTime &gt; _openingTime);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_index &gt; currentStage);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_index &lt; stages.length);
&nbsp;
        stages[_index].opening = _openingTime;        
        stages[_index].closing = _closingTime;        
    }
&nbsp;
    function setRate(uint _index, uint256 _rate) onlyOwner public {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_index &gt; currentStage);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_index &lt; stages.length);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_rate &gt; 0);
&nbsp;
        stages[_index].rate = _rate;
    }
&nbsp;
    function setCapacity(uint _index, uint256 _capacity) onlyOwner public {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_index &gt; currentStage);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_index &lt; stages.length);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_capacity &gt; 0);
&nbsp;
        stages[_index].capacity = _capacity;
    }
&nbsp;
    function setClaimable(bool _claimable) onlyOwner public {
        <span class="missing-if-branch" title="else path not taken" >E</span>if ( _claimable == true ) {
            <span class="missing-if-branch" title="else path not taken" >E</span>require(isGoalReached());
        }
&nbsp;
        isClaimable = _claimable;
    }
&nbsp;
    function addPrivateSale(uint256 _amount) onlyOwner public {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(currentStage == 0);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_amount &gt; 0);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_amount &lt; stages[0].capacity.sub(stages[0].sold));
&nbsp;
        stages[0].sold = stages[0].sold.add(_amount);
    }
&nbsp;
    function subPrivateSale(uint256 _amount) onlyOwner public {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(currentStage == 0);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_amount &gt; 0);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(stages[0].sold &gt; _amount);
&nbsp;
        stages[0].sold = stages[0].sold.sub(_amount);
    }
&nbsp;
    // permission
    function setAdmin(address _newAdmin) public onlyOwner {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_newAdmin != address(0x0));
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_newAdmin != address(this));
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_newAdmin != owner);
&nbsp;
        emit AdminTransferred(admin, _newAdmin);
        admin = _newAdmin;
    }
&nbsp;
    function transferOwnership(address newOwner) public onlyOwner {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(newOwner != address(0));
        <span class="missing-if-branch" title="else path not taken" >E</span>require(newOwner != address(this));
        emit OwnershipTransferred(owner, newOwner);
        owner = newOwner;
    }
&nbsp;
    // constructor
    function ACATokenSale(
        address _wallet, 
        address _admin,
        uint256 _totalSupply,
        uint256 _softCap,
        uint256 _hardCap) public {
        owner = msg.sender;
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_admin != address(0));
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_wallet != address(0));
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_totalSupply &gt; 0);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_softCap &gt; 0);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_hardCap &gt; _softCap);
&nbsp;
        admin = _admin;
        wallet = _wallet;
&nbsp;
        totalSupply = _totalSupply;
        softCap = _softCap;
        hardCap = _hardCap;
&nbsp;
        emit TokenSaleCreated(wallet, _totalSupply);
    }
&nbsp;
    // state related
    function setupBounty(
        uint256 _referralAmount,
        uint256 _referralRateInviter,
        uint256 _referralRateInvitee,
        uint256 _bountyAmount,
        uint256 _whitelistBonusClosingTime,
        uint256 _whitelistBonusRate,
        uint256 _whitelistBonusAmount
    ) onlyOwner public {
        
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_referralAmount &gt; 0);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_referralRateInviter &gt; 0 &amp;&amp; _referralRateInviter &lt; 100);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_referralRateInvitee &gt; 0 &amp;&amp; _referralRateInvitee &lt; 100);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_whitelistBonusClosingTime &gt; now);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_whitelistBonusRate &gt; 0);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_whitelistBonusAmount &gt; _whitelistBonusRate);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_bountyAmount &gt; 0);
&nbsp;
        referralAmount = _referralAmount;
        referralRateInviter = _referralRateInviter;
        referralRateInvitee = _referralRateInvitee;
        bountyAmount = _bountyAmount;
        whitelistBonusClosingTime = _whitelistBonusClosingTime;
        whitelistBonusRate = _whitelistBonusRate;
        whitelistBonusAmount = _whitelistBonusAmount;
&nbsp;
        emit BountySetupDone();
    }
    function addStage(
        uint256 _openingTime, 
        uint256 _closingTime, 
        uint256 _capacity, 
        uint256 _minimumWei, 
        uint256 _maximumWei, 
        uint256 _rate) onlyOwner public {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(tokenSaleEnabled == false);
&nbsp;
        // require(_openingTime &gt; now);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_closingTime &gt; _openingTime);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_capacity &gt; 0);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_capacity &lt; hardCap);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_minimumWei &gt; 0);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_maximumWei &gt;= _minimumWei);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_rate &gt; 0);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_minimumWei.mul(_rate) &lt; _capacity);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_maximumWei.mul(_rate) &lt; _capacity);
        if ( stages.length &gt; 0 ) {
            StageInfo memory prevStage = stages[stages.length - 1];
            <span class="missing-if-branch" title="else path not taken" >E</span>require(_openingTime &gt; prevStage.closing);
        }
&nbsp;
        stages.push(StageInfo(_openingTime, _closingTime, _capacity, _minimumWei, _maximumWei, _rate, 0));
&nbsp;
        emit StageAdded(_openingTime, _closingTime, _capacity, _minimumWei, _maximumWei, _rate);
    }
&nbsp;
    function setToken(ACAToken _token) onlyOwner public {
        token = _token;
    }
&nbsp;
    function enableTokenSale() onlyOwner public returns (bool) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(stages.length &gt; 0);
&nbsp;
        vault = new RefundVault(wallet);
&nbsp;
        tokenSaleEnabled = true;
        emit TokenSaleEnabled();
        return true;
    }
&nbsp;
    function updateStage() public returns (uint256) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(tokenSaleEnabled == true);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(currentStage &lt; stages.length);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(now &gt;= stages[currentStage].opening);
&nbsp;
        uint256 remains = stages[currentStage].capacity.sub(stages[currentStage].sold);
        if ( now &gt; stages[currentStage].closing ) {
            uint256 nextStage = currentStage.add(1);
            if ( remains &gt; 0 &amp;&amp; nextStage &lt; stages.length ) {
                stages[nextStage].capacity = stages[nextStage].capacity.add(remains);
                remains = stages[nextStage].capacity;
            }
&nbsp;
            currentStage = nextStage;
            emit StageUpdated(nextStage);
        }
&nbsp;
        return remains;
    }
&nbsp;
    function finalize() onlyOwner public {
        require(isFinalized == false);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(isClosed());
&nbsp;
        finalization();
        emit Finalized();
&nbsp;
        isFinalized = true;
    }
&nbsp;
    function finalization() internal {
        if (isGoalReached()) {
            vault.close();
        } else {
            vault.enableRefunds();
        }
&nbsp;
    }
&nbsp;
    // transaction
<span class="fstat-no" title="function not covered" >    function () public payabl</span>e {
<span class="cstat-no" title="statement not covered" >        buyTokens(msg.sender)</span>;
    }
&nbsp;
    function buyTokens(address _beneficiary) public payable {
        uint256 weiAmount = msg.value;
&nbsp;
        _preValidatePurchase(_beneficiary, weiAmount);
        // calculate token amount to be created
        uint256 tokens = _getTokenAmount(weiAmount);
        // update state
        weiRaised = weiRaised.add(weiAmount);
&nbsp;
        _processPurchase(_beneficiary, tokens);
        emit TokenPurchase(msg.sender, _beneficiary, weiAmount, tokens);
&nbsp;
        _updatePurchasingState(_beneficiary, weiAmount);
&nbsp;
        _forwardFunds();
        _postValidatePurchase(_beneficiary, weiAmount);
    }
&nbsp;
    function _getTokenAmount(uint256 _weiAmount) internal view returns (uint256) {
        return _weiAmount.mul(getCurrentRate());
    }
&nbsp;
    function _getTokenAmountWithoutBonus(uint256 _weiAmount) internal view returns (uint256) {
        return _weiAmount.mul(getRateWithoutBonus());
    }
&nbsp;
    function _preValidatePurchase(address _beneficiary, uint256 _weiAmount) internal isVerified(_beneficiary) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_beneficiary != address(0));
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_weiAmount != 0);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(tokenSaleEnabled == true);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(now &gt;= stages[currentStage].opening);
&nbsp;
        // lazy execution
        uint256 remains = updateStage();
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(currentStage &lt; stages.length);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(now &gt;= stages[currentStage].opening &amp;&amp; now &lt;= stages[currentStage].closing);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_weiAmount &gt;= stages[currentStage].minimumWei);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_weiAmount &lt;= stages[currentStage].maximumWei);
&nbsp;
        uint256 amount = _getTokenAmount(_weiAmount);
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(remains &gt; amount);
    }
&nbsp;
    function _postValidatePurchase(address _beneficiary, uint256 _weiAmount) internal {
        <span class="missing-if-branch" title="if path not taken" >I</span>if ( getCurrentSold() == getCurrentCapacity() ) {
<span class="cstat-no" title="statement not covered" >            currentStage = currentStage.add(1)</span>;
            emit <span class="cstat-no" title="statement not covered" >StageUpdated(currentStage)</span>;
        }
    }
&nbsp;
    function _deliverTokens(address _beneficiary, uint256 _tokenAmount) internal {
        if ( isClaimable ) {
            token.transferFrom(owner, _beneficiary, _tokenAmount);
        }
        else {
            sales[_beneficiary] = sales[_beneficiary].add(_tokenAmount);
        }
    }
&nbsp;
    function _processPurchase(address _beneficiary, uint256 _tokenAmount) internal {
&nbsp;
        stages[currentStage].sold = stages[currentStage].sold.add(_tokenAmount);
        _deliverTokens(_beneficiary, _tokenAmount);
&nbsp;
        uint256 weiAmount = msg.value;
        address inviter = referrals[_beneficiary];
        if ( inviter != address(0x0) &amp;&amp; referralDone == false ) {
            uint256 baseRate = _getTokenAmountWithoutBonus(weiAmount);
            uint256 referralAmountInviter = baseRate.div(100).mul(referralRateInviter);
            uint256 referralAmountInvitee = baseRate.div(100).mul(referralRateInvitee);
            uint256 referralRemains = referralAmount.sub(referralSent);
            <span class="missing-if-branch" title="if path not taken" >I</span>if ( referralRemains == 0 ) {
<span class="cstat-no" title="statement not covered" >                referralDone = true</span>;
            }
            else {
                <span class="missing-if-branch" title="if path not taken" >I</span>if ( referralAmountInviter &gt;= referralRemains ) {
<span class="cstat-no" title="statement not covered" >                    referralAmountInviter = referralRemains</span>;
<span class="cstat-no" title="statement not covered" >                    referralAmountInvitee = 0</span>; // priority to inviter
                    emit <span class="cstat-no" title="statement not covered" >ReferralCapReached()</span>;
<span class="cstat-no" title="statement not covered" >                    referralDone = true</span>;
                }
                <span class="missing-if-branch" title="if path not taken" >I</span>if ( referralDone == false &amp;&amp; referralAmountInviter &gt;= referralRemains ) {
<span class="cstat-no" title="statement not covered" >                    referralAmountInvitee = referralRemains.sub(referralAmountInviter)</span>;
                    emit <span class="cstat-no" title="statement not covered" >ReferralCapReached()</span>;
<span class="cstat-no" title="statement not covered" >                    referralDone = true</span>;
                }
&nbsp;
                uint256 referralAmountTotal = referralAmountInviter.add(referralAmountInvitee);
                referralSent = referralSent.add(referralAmountTotal);
&nbsp;
                <span class="missing-if-branch" title="else path not taken" >E</span>if ( referralAmountInviter &gt; 0 ) {
                    _deliverTokens(inviter, referralAmountInviter);
                    emit PurchaseReferral(inviter, referralAmountInviter);
                }
                <span class="missing-if-branch" title="else path not taken" >E</span>if ( referralAmountInvitee &gt; 0 ) {
                    _deliverTokens(_beneficiary, referralAmountInvitee);
                    emit PurchaseReferral(_beneficiary, referralAmountInvitee);
                }
            }
        }
    }
&nbsp;
    function _updatePurchasingState(address _beneficiary, uint256 _weiAmount) internal {
        // optional override
    }
&nbsp;
    function _forwardFunds() internal {
        vault.deposit.value(msg.value)(msg.sender);
    }
&nbsp;
    // claim
    function claimToken() public claimable isVerified(msg.sender) returns (bool) {
        address beneficiary = msg.sender;
        uint256 amount = sales[beneficiary];
&nbsp;
        emit TokenClaimed(beneficiary, amount);
&nbsp;
        sales[beneficiary] = 0;
        return token.transferFrom(owner, beneficiary, amount);
    }
&nbsp;
    function claimRefund() isVerified(msg.sender) public {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(isFinalized == true);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(!isGoalReached());
&nbsp;
        vault.refund(msg.sender);
    }
&nbsp;
    function claimBountyToken() public claimable isVerified(msg.sender) returns (bool) {
        address beneficiary = msg.sender;
        uint256 amount = bounties[beneficiary];
&nbsp;
        emit TokenClaimed(beneficiary, amount);
&nbsp;
        bounties[beneficiary] = 0;
        return token.transferFrom(owner, beneficiary, amount);
    }
&nbsp;
    // bounty
    function addBounty(address _address, uint256 _amount) public onlyAdmin isVerified(_address) returns (bool) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(bountyAmount.sub(bountySent) &gt;= _amount);
&nbsp;
        bountySent = bountySent.add(_amount);
        bounties[_address] = bounties[_address].add(_amount);
        emit BountyUpdated(_address, true, _amount);
    }
    function delBounty(address _address, uint256 _amount) public onlyAdmin isVerified(_address) returns (bool) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(bounties[_address] &gt;= _amount);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_amount &lt;= bountySent);
&nbsp;
        bountySent = bountySent.sub(_amount);
        bounties[_address] = bounties[_address].sub(_amount);
        emit BountyUpdated(_address, false, _amount);
    }
    function getBountyAmount(address _address) public view returns (uint256) {
        return bounties[_address];
    }
&nbsp;
    // referral
    function addReferral(address _inviter, address _invitee) public onlyAdmin isVerified(_inviter) isVerified(_invitee) returns (bool) {
        referrals[_invitee] = _inviter;
    }
<span class="fstat-no" title="function not covered" >    function delReferral(address _inviter, address _invitee) public onlyAdmin isVerified(_inviter) isVerified(_invitee) returns (bool</span>) {
        delete referrals[_invitee];
    }
    function getReferral(address _address) public view returns (address) {
        return referrals[_address];
    }
&nbsp;
    // whitelist
    function _deliverWhitelistBonus(address _beneficiary) internal {
        <span class="missing-if-branch" title="if path not taken" >I</span>if ( _beneficiary == address(0x0) ) {
<span class="cstat-no" title="statement not covered" >            return;</span>
        }
&nbsp;
        <span class="missing-if-branch" title="if path not taken" >I</span>if ( whitelistBonus[_beneficiary] == true ) {
<span class="cstat-no" title="statement not covered" >            return;</span>
        }
        
        <span class="missing-if-branch" title="else path not taken" >E</span>if (whitelistBonusAmount.sub(whitelistBonusSent) &gt; whitelistBonusRate ) {
            whitelistBonus[_beneficiary] = true;
&nbsp;
            whitelistBonusSent = whitelistBonusSent.add(whitelistBonusRate);
            bounties[_beneficiary] = bounties[_beneficiary].add(whitelistBonusRate);
            emit BountyUpdated(_beneficiary, true, whitelistBonusRate);
        }
    }
    function isAccountWhitelisted(address _beneficiary) public view returns (bool) {
        return whitelist[_beneficiary];
    }
&nbsp;
    function addToWhitelist(address _beneficiary) external onlyAdmin {
        whitelist[_beneficiary] = true;
&nbsp;
        if ( whitelistBonus[_beneficiary] == false &amp;&amp; now &lt; whitelistBonusClosingTime ) {
            _deliverWhitelistBonus(_beneficiary);
        }
&nbsp;
        emit WhitelistUpdated(_beneficiary, true);
    }
&nbsp;
    function addManyToWhitelist(address[] _beneficiaries) external onlyAdmin {
        uint256 i = 0;
        <span class="missing-if-branch" title="if path not taken" >I</span>if ( now &lt; whitelistBonusClosingTime ) {
<span class="cstat-no" title="statement not covered" >            for (i = 0; i &lt; _beneficiaries.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >                whitelist[_beneficiaries[i]] = true</span>;
<span class="cstat-no" title="statement not covered" >                _deliverWhitelistBonus(_beneficiaries[i])</span>;
            }
<span class="cstat-no" title="statement not covered" >            return;</span>
        }
&nbsp;
        for (i = 0; i &lt; _beneficiaries.length; i++) {
            whitelist[_beneficiaries[i]] = true;
        }
&nbsp;
        emit BulkWhitelistUpdated(_beneficiaries, true);
    }
&nbsp;
    function removeFromWhitelist(address _beneficiary) external onlyAdmin {
        whitelist[_beneficiary] = false;
&nbsp;
        emit WhitelistUpdated(_beneficiary, false);
    }
&nbsp;
    // kyc
    function isAccountVerified(address _beneficiary) public view returns (bool) {
        return kyclist[_beneficiary];
    }
&nbsp;
    function setAccountVerified(address _beneficiary) external onlyAdmin {
        kyclist[_beneficiary] = true;
&nbsp;
        emit VerificationUpdated(_beneficiary, true);
    }
&nbsp;
    function setManyAccountsVerified(address[] _beneficiaries) external onlyAdmin {
        for (uint256 i = 0; i &lt; _beneficiaries.length; i++) {
            kyclist[_beneficiaries[i]] = true;
        }
&nbsp;
        emit BulkVerificationUpdated(_beneficiaries, true);
    }
&nbsp;
    function unverifyAccount(address _beneficiary) external onlyAdmin {
        kyclist[_beneficiary] = false;
&nbsp;
        emit VerificationUpdated(_beneficiary, false);
    }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Fri Feb 08 2019 13:12:30 GMT+0530 (IST)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
